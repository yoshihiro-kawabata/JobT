<h1>スケジュール</h1>

<%= search_form_for @q, url: search_schedules_path do |f| %>
  <div class="d-flex flex-wrap">
  <div class="col-sm-12 col-lg-1">
   <%= f.label :schedule_date, '　　期間' %>
    </div>
    <div class="col-sm-12 col-lg-4">
    <%= f.date_field :schedule_date_gteq,
                  include_blank: true,
                  class: 'form-control'%>
                    </div>
                    <div class="col-sm-12 col-lg-1">　　～
                    </div>
                    <div class="col-sm-12 col-lg-4">
                    <%= f.date_field :schedule_date_lteq, 
    include_blank: true,
    class: 'form-control'%>
      </div>
      <div class="col-sm-12 col-lg-2">
      <%= f.submit '検索', class: "btn btn-primary"  %>
      </div>
      </div>
      </div>
  <% end %>
<br>
  
<div class="example">
 <table>
    <tr>
      <th>名前</th>
      <% @schedules[0].each do |schedule| %>
        <th><%= schedule.schedule_date.strftime("%m月%d日") %></th>
      <% end %>
    </tr>
  <% @users.each do |user| %>
    <tr>
    <th>
     <%= user.name %>
    </th>
    <% schecount = @schedules[user.id].length %>
        <% schecount.times do |s| %>
     <td>
      <p>予定：<%= @schedules[user.id]["#{s}".to_i].start_time %> ～ <%= @schedules[user.id]["#{s}".to_i].end_time %>
        　ステータス：<%= @schedules[user.id]["#{s}".to_i].status %><%= link_to "確認", schedule_path(@schedules[user.id]["#{s}".to_i].id) %></p>
     </td>
    <% end %>
  </tr>
<% end %>
</table>
</div>

